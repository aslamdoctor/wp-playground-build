import{cn as m,cb as g,cQ as u,j as e,U as p}from"./optional/blueprint-editor-BF9JwLNn.js";import{s as f,N as x,l as j}from"./setup-playground-sync-CNNLcfIS.js";import{g as y}from"./config-EgTtIA_y.js";import"./optional/vendor-codemirror-CjDT2NJG.js";import"./optional/vendor-lezer-BVuE63-5.js";import"./optional/lang-php-DAdSG8P3.js";import"./optional/lang-html-B08Fw0dr.js";import"./optional/lang-css-DVB8fG3-.js";import"./optional/lang-javascript-rj9Dnv5V.js";const w="time-traveling";async function E(n=[]){const o=Math.round((1+Math.random())*1e6);console.log({autoincrementOffset:o});const a=document.getElementById("wp"),i=await m({iframe:a,remoteUrl:y().toString(),sqliteDriverVersion:"v2.1.16"}),c=new x;await f(i,{autoincrementOffset:o,transport:c,middlewares:[j(w),S]}),n.forEach(t=>c.injectChanges(t)),await g(i,{username:"admin"}),await i.goTo("/")}const S={beforeSend(n){return v(n),n},afterReceive(n){return n}},d=({envelopes:n})=>{const[o,a]=p.useState(new Set);function i(t){a(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})}function c(){const t=n.filter(r=>!o.has(r.id));console.log("Replaying"),E(t)}return e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:c,children:"Replay selected"}),e.jsx("ul",{children:[...n].reverse().map(t=>e.jsx("li",{children:e.jsxs("label",{children:[e.jsx("div",{children:e.jsxs("h4",{children:[e.jsx("input",{type:"checkbox",checked:!o.has(t.id),onChange:()=>i(t.id)}),"Â  Batch of changes #$",t.id]})}),e.jsx("h5",{children:"SQL changes"}),e.jsx("ul",{children:t.sql.map((r,s)=>e.jsx("li",{children:JSON.stringify(r)},s))}),e.jsx("h5",{children:"FS changes"}),e.jsx("ul",{children:t.fs.map((r,s)=>e.jsx("li",{children:JSON.stringify(r)},s))})]})},t.id))})]})},b=document.getElementById("logs"),h=u(b);h.render(e.jsx(d,{envelopes:[]}));const l=[];function v(n){!n.sql.length&&!n.fs.length||(l.push({...n,id:l.length}),h.render(e.jsx(d,{envelopes:l})))}export{E as restartDemo};
//# sourceMappingURL=time-traveling-BuOzokPq.js.map
