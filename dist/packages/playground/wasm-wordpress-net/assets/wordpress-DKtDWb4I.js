(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const _ of s)if(_.type==="childList")for(const o of _.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const _={};return s.integrity&&(_.integrity=s.integrity),s.referrerPolicy&&(_.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?_.credentials="include":s.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function n(s){if(s.ep)return;s.ep=!0;const _=r(s);fetch(s.href,_)}})();const Z=function(){return typeof process<"u"&&process.release?.name==="node"?"NODE":typeof window<"u"?"WEB":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?"WORKER":"NODE"}();if(Z==="NODE"){let e=function(r){return new Promise(function(n,s){r.onload=r.onerror=function(_){r.onload=r.onerror=null,_.type==="load"?n(r.result):s(new Error("Failed to read the blob/file"))}})},t=function(){const r=new Uint8Array([1,2,3,4]),s=new File([r],"test").stream();try{return s.getReader({mode:"byob"}),!0}catch{return!1}};if(typeof File>"u"){class r extends Blob{constructor(s,_,o){super(s);let c;o?.lastModified&&(c=new Date),(!c||isNaN(c.getFullYear()))&&(c=new Date),this.lastModifiedDate=c,this.lastModified=c.getMilliseconds(),this.name=_||""}}global.File=r}typeof Blob.prototype.arrayBuffer>"u"&&(Blob.prototype.arrayBuffer=function(){const n=new FileReader;return n.readAsArrayBuffer(this),e(n)}),typeof Blob.prototype.text>"u"&&(Blob.prototype.text=function(){const n=new FileReader;return n.readAsText(this),e(n)}),(typeof Blob.prototype.stream>"u"||!t())&&(Blob.prototype.stream=function(){let r=0;const n=this;return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,async pull(s){const _=s.byobRequest.view,c=await n.slice(r,r+_.byteLength).arrayBuffer(),d=new Uint8Array(c);new Uint8Array(_.buffer).set(d);const i=d.byteLength;s.byobRequest.respond(i),r+=i,r>=n.size&&s.close()}})})}if(Z==="NODE"&&typeof CustomEvent>"u"){class e extends Event{constructor(r,n={}){super(r,n),this.detail=n.detail}initCustomEvent(){}}globalThis.CustomEvent=e}const le="playground-log",Ce=(e,...t)=>{ee.dispatchEvent(new CustomEvent(le,{detail:{log:e,args:t}}))},He=(e,...t)=>{switch(typeof e.message=="string"?Reflect.set(e,"message",k(e.message)):e.message.message&&typeof e.message.message=="string"&&Reflect.set(e.message,"message",k(e.message.message)),e.severity){case E.Debug:console.debug(e.message,...t);break;case E.Info:console.info(e.message,...t);break;case E.Warn:console.warn(e.message,...t);break;case E.Error:console.error(e.message,...t);break;case E.Fatal:console.error(e.message,...t);break;default:console.log(e.message,...t)}},Ae=e=>e instanceof Error?[e.message,e.stack].join(`
`):JSON.stringify(e,null,2),X=[],V=e=>{X.push(e)},Q=e=>{if(e.raw===!0)V(e.message);else{const t=Te(typeof e.message=="object"?Ae(e.message):e.message,e.severity,e.prefix??p.JS);V(t)}},E={Fatal:{},Error:{name:"error",level:1},Warn:{name:"warn",level:2},Log:{name:"log",level:3},Info:{name:"info",level:4},Debug:{name:"debug",level:5}},p={JS:"JavaScript"};class Ee extends EventTarget{constructor(t=[]){super(),this.fatalErrorEvent="playground-fatal-error",this.severity=E.Info,this.handlers=t}getLogs(){return this.handlers.includes(Q)?[...X]:(this.error(`Logs aren't stored because the logToMemory handler isn't registered.
				If you're using a custom logger instance, make sure to register logToMemory handler.
			`),[])}logMessage(t,...r){const n={...t,severity:t.severity??E.Log};for(const s of this.handlers)n.severity.level<=this.severity.level&&s(n,...r)}setSeverityFilterLevel(t){this.severity=t}log(t,...r){this.logMessage({message:t,severity:E.Log,prefix:p.JS,raw:!1},...r)}debug(t,...r){this.logMessage({message:t,severity:E.Debug,prefix:p.JS,raw:!1},...r)}info(t,...r){this.logMessage({message:t,severity:E.Info,prefix:p.JS,raw:!1},...r)}warn(t,...r){this.logMessage({message:t,severity:E.Warn,prefix:p.JS,raw:!1},...r)}error(t,...r){this.logMessage({message:t,severity:E.Error,prefix:p.JS,raw:!1},...r)}}const fe=()=>{try{}catch{}return[Q,He,Ce]},ee=new Ee(fe()),k=e=>e.replace(/\t/g,""),Te=(e,t,r)=>{const n=new Date,s=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",timeZone:"UTC"}).format(n).replace(/ /g,"-"),_=new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:"UTC",timeZoneName:"short"}).format(n),o=s+" "+_;return e=k(e),`[${o}] ${r} ${t.name}: ${e}`},te=Symbol("SleepFinished");function he(e){return new Promise(t=>{setTimeout(()=>t(te),e)})}class pe extends Error{constructor(){super("Acquiring lock timed out")}}class re{constructor({concurrency:t,timeout:r}){this._running=0,this.concurrency=t,this.timeout=r,this.queue=[]}get remaining(){return this.concurrency-this.running}get running(){return this._running}async acquire(){for(;;)if(this._running>=this.concurrency){const t=new Promise(r=>{this.queue.push(r)});this.timeout!==void 0?await Promise.race([t,he(this.timeout)]).then(r=>{if(r===te)throw new pe}):await t}else{this._running++;let t=!1;return()=>{t||(t=!0,this._running--,this.queue.length>0&&this.queue.shift()())}}}async run(t){const r=await this.acquire();try{return await t()}finally{r()}}}class q extends Error{constructor(t,r){super(t),this.userFriendlyMessage=r??t}}function Le(e){let t=0;e.forEach(s=>t+=s.length);const r=new Uint8Array(t);let n=0;return e.forEach(s=>{r.set(s,n),n+=s.length}),r}(function(){return typeof process<"u"&&process.release?.name==="node"?"NODE":typeof window<"u"?"WEB":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?"WORKER":"NODE"})();const ye={500:"Internal Server Error",502:"Bad Gateway",404:"Not Found",403:"Forbidden",401:"Unauthorized",400:"Bad Request",301:"Moved Permanently",302:"Found",307:"Temporary Redirect",308:"Permanent Redirect",204:"No Content",201:"Created",200:"OK"};class R{constructor(t,r,n,s){this.parsedHeaders=null,this.cachedStdoutBytes=null,this.cachedStderrText=null,this.headersStream=t,this.stdout=r,this.stderr=n,this.exitCode=s}async ok(){try{const t=await this.httpStatusCode;return t>=200&&t<400}catch{return!1}}get finished(){return Promise.allSettled([this.exitCode.finally(()=>{})]).then(()=>{})}get headers(){return this.getParsedHeaders().then(t=>t.headers)}get httpStatusCode(){return this.getParsedHeaders().then(t=>t.httpStatusCode).then(t=>t!==void 0?t:this.getParsedHeaders().then(r=>r.httpStatusCode,()=>200)).catch(()=>500)}get stdoutText(){return this.stdoutBytes.then(t=>new TextDecoder().decode(t))}get stdoutBytes(){return this.cachedStdoutBytes||(this.cachedStdoutBytes=ge(this.stdout)),this.cachedStdoutBytes}get stderrText(){return this.cachedStderrText||(this.cachedStderrText=ne(this.stderr)),this.cachedStderrText}async getParsedHeaders(){return this.parsedHeaders||(this.parsedHeaders=me(this.headersStream)),await this.parsedHeaders}}async function me(e){const t=await ne(e);let r;try{r=JSON.parse(t)}catch{return{headers:{},httpStatusCode:200}}const n={};for(const s of r.headers){if(!s.includes(": "))continue;const _=s.indexOf(": "),o=s.substring(0,_).toLowerCase(),c=s.substring(_+2);o in n||(n[o]=[]),n[o].push(c)}return{headers:n,httpStatusCode:r.status}}async function ne(e){const t=e.pipeThrough(new TextDecoderStream).getReader(),r=[];for(;;){const{done:n,value:s}=await t.read();if(n)return r.join("");s&&r.push(s)}}async function ge(e){const t=e.getReader(),r=[];for(;;){const{done:n,value:s}=await t.read();if(n){const _=r.reduce((d,i)=>d+i.byteLength,0),o=new Uint8Array(_);let c=0;for(const d of r)o.set(d,c),c+=d.byteLength;return o}s&&r.push(s)}}class y{constructor(t,r,n,s="",_=0){this.httpStatusCode=t,this.headers=r,this.bytes=n,this.exitCode=_,this.errors=s}static forHttpCode(t,r=""){return new y(t,{},new TextEncoder().encode(r||ye[t]||""))}static fromRawData(t){return new y(t.httpStatusCode,t.headers,t.bytes,t.errors,t.exitCode)}static async fromStreamedResponse(t){return await t.finished,new y(await t.httpStatusCode,await t.headers,await t.stdoutBytes,await t.stderrText,await t.exitCode)}ok(){return this.httpStatusCode>=200&&this.httpStatusCode<400}toRawData(){return{headers:this.headers,bytes:this.bytes,errors:this.errors,exitCode:this.exitCode,httpStatusCode:this.httpStatusCode}}get json(){return JSON.parse(this.text)}get text(){return new TextDecoder().decode(this.bytes)}}ReadableStream.prototype[Symbol.asyncIterator]||(ReadableStream.prototype[Symbol.asyncIterator]=async function*(){const e=this.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}},ReadableStream.prototype.iterate=ReadableStream.prototype[Symbol.asyncIterator]);new re({concurrency:10});/**
 * Original, unmodified Comlink library from Google:
 *
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const se=Symbol("Comlink.proxy"),Ie=Symbol("Comlink.endpoint"),we=Symbol("Comlink.releaseProxy"),M=Symbol("Comlink.finalizer"),g=Symbol("Comlink.thrown");/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I={RAW:"RAW",HANDLER:"HANDLER"},H={GET:"GET",SET:"SET",APPLY:"APPLY",CONSTRUCT:"CONSTRUCT",ENDPOINT:"ENDPOINT",RELEASE:"RELEASE"},_e=e=>typeof e=="object"&&e!==null||typeof e=="function",De={canHandle:e=>_e(e)&&e[se],serialize(e){const{port1:t,port2:r}=new MessageChannel;return W(e,t),[r,[r]]},deserialize(e){return e.start(),U(e)}},Ke={canHandle:e=>_e(e)&&g in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},f=new Map([["proxy",De],["throw",Ke]]);function We(e,t){for(const r of e)if(t===r||r==="*"||r instanceof RegExp&&r.test(t))return!0;return!1}function W(e,t=globalThis,r=["*"],n){t.addEventListener("message",function s(_){if(!_||!_.data)return;if(!We(r,_.origin)){console.warn(`Invalid origin '${_.origin}' for comlink proxy`);return}const{id:o,type:c,path:d}={path:[],..._.data},i=(_.data.argumentList||[]).map(h);let S;try{const a=d.slice(0,-1).reduce((l,C)=>l[C],e),u=d.reduce((l,C)=>l[C],e);switch(c){case H.GET:S=u;break;case H.SET:a[d.slice(-1)[0]]=h(_.data.value),S=!0;break;case H.APPLY:S=u.apply(a,i);break;case H.CONSTRUCT:{const l=new u(...i);S=ce(l)}break;case H.ENDPOINT:{const{port1:l,port2:C}=new MessageChannel;W(e,C),S=Be(l,[l])}break;case H.RELEASE:S=void 0;break;default:return}}catch(a){S={value:a,[g]:0}}Promise.resolve(S).catch(a=>({value:a,[g]:0})).then(a=>{const[u,l]=K(a);t.postMessage({...u,id:o},l),c===H.RELEASE&&(t.removeEventListener("message",s),oe(t),M in e&&typeof e[M]=="function"&&e[M]())}).catch(()=>{const[a,u]=K({value:new TypeError("Unserializable return value"),[g]:0});t.postMessage({...a,id:o},u)}).finally(()=>{})}),t.start&&t.start()}function be(e){return e.constructor.name==="MessagePort"}function oe(e){be(e)&&e.close()}function U(e,t){const r=new Map;return e.addEventListener("message",function(s){const{data:_}=s;if(!_||!_.id)return;const o=r.get(_.id);if(o)try{o(_)}finally{r.delete(_.id)}}),x(e,r,[],t)}function m(e){if(e)throw new Error("Proxy has been released and is not useable")}function ae(e){return L(e,new Map,{type:H.RELEASE}).then(()=>{oe(e)})}const w=new WeakMap,D="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(w.get(e)||0)-1;w.set(e,t),t===0&&ae(e)});function Pe(e,t){const r=(w.get(t)||0)+1;w.set(t,r),D&&D.register(e,t,e)}function Re(e){D&&D.unregister(e)}function x(e,t,r=[],n=function(){}){let s=!1;const _=new Proxy(n,{get(o,c){if(m(s),c===we)return()=>{Re(_),ae(e),t.clear(),s=!0};if(c==="then"){if(r.length===0)return{then:()=>_};const d=L(e,t,{type:H.GET,path:r.map(i=>i.toString())}).then(h);return d.then.bind(d)}return x(e,t,[...r,c])},set(o,c,d){m(s);const[i,S]=K(d);return L(e,t,{type:H.SET,path:[...r,c].map(a=>a.toString()),value:i},S).then(h)},apply(o,c,d){m(s);const i=r[r.length-1];if(i===Ie)return L(e,t,{type:H.ENDPOINT}).then(h);if(i==="bind")return x(e,t,r.slice(0,-1));const[S,a]=J(d);return L(e,t,{type:H.APPLY,path:r.map(u=>u.toString()),argumentList:S},a).then(h)},construct(o,c){m(s);const[d,i]=J(c);return L(e,t,{type:H.CONSTRUCT,path:r.map(S=>S.toString()),argumentList:d},i).then(h)}});return Pe(_,e),_}function Me(e){return Array.prototype.concat.apply([],e)}function J(e){const t=e.map(K);return[t.map(r=>r[0]),Me(t.map(r=>r[1]))]}const ie=new WeakMap;function Be(e,t){return ie.set(e,t),e}function ce(e){return Object.assign(e,{[se]:!0})}function Se(e,t=globalThis,r="*"){return{postMessage:(n,s)=>e.postMessage(n,r,s),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function K(e){for(const[t,r]of f)if(r.canHandle(e)){const[n,s]=r.serialize(e);return[{type:I.HANDLER,name:t,value:n},s]}return[{type:I.RAW,value:e},ie.get(e)||[]]}function h(e){switch(e.type){case I.HANDLER:return f.get(e.name).deserialize(e.value);case I.RAW:return e.value}}function L(e,t,r,n){return new Promise(s=>{const _=ve();t.set(_,s),e.start&&e.start(),e.postMessage({id:_,...r},n)})}function ve(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ke(e){const t=new WeakMap;return{postMessage:e.postMessage.bind(e),addEventListener:(r,n)=>{const s=_=>{"handleEvent"in n?n.handleEvent({data:_}):n({data:_})};e.on("message",s),t.set(n,s)},removeEventListener:(r,n)=>{const s=t.get(n);s&&(e.off("message",s),t.delete(n))},start:e.start&&e.start.bind(e)}}const xe=[Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Ne=new Map(xe);class O extends Error{constructor(t){super(O._prepareSuperMessage(t)),this.name="NonError"}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}}const Ue=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1},{property:"errors",enumerable:!1}],N=new WeakSet,Oe=e=>{N.add(e);const t=e.toJSON();return N.delete(e),t},de=e=>{const t=Ne.get(e)??Error;return t===AggregateError?new t([]):new t},F=({from:e,seen:t,to:r,forceEnumerable:n,maxDepth:s,depth:_,useToJSON:o,serialize:c})=>{if(r||(Array.isArray(e)?r=[]:!c&&Y(e)?r=de(e.name):r={}),t.push(e),_>=s)return r;if(o&&typeof e.toJSON=="function"&&!N.has(e))return Oe(e);const d=i=>F({from:i,seen:[...t],forceEnumerable:n,maxDepth:s,depth:_,useToJSON:o,serialize:c});for(const[i,S]of Object.entries(e)){if(S&&S instanceof Uint8Array&&S.constructor.name==="Buffer"){r[i]="[object Buffer]";continue}if(S!==null&&typeof S=="object"&&typeof S.pipe=="function"){r[i]="[object Stream]";continue}if(typeof S!="function"){if(!S||typeof S!="object"){try{r[i]=S}catch{}continue}if(!t.includes(e[i])){_++,r[i]=d(e[i]);continue}r[i]="[Circular]"}}if(c||r instanceof Error)for(const{property:i,enumerable:S}of Ue)e[i]!==void 0&&e[i]!==null&&Object.defineProperty(r,i,{value:Y(e[i])||Array.isArray(e[i])?d(e[i]):e[i],enumerable:n?!0:S,configurable:!0,writable:!0});return r};function Fe(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return typeof e=="object"&&e!==null?F({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function Ge(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;return e instanceof Error?e:ze(e)?F({from:e,seen:[],to:de(e.name),maxDepth:r,depth:0,serialize:!1}):new O(e)}function Y(e){return!!e&&typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"&&typeof e.stack=="string"}function ze(e){return!!e&&typeof e=="object"&&typeof e.message=="string"&&!Array.isArray(e)}function Ve(e,t=void 0){ue();let r;import.meta.url.startsWith("file://")?r=ke(e):r=e instanceof Worker?e:Se(e,t);const s=U(r),_=G(s);return new Proxy(_,{get:(o,c)=>c==="isConnected"?async()=>{for(;;)try{await qe(s.isConnected(),200);break}catch{}}:s[c]})}async function qe(e,t){return new Promise((r,n)=>{setTimeout(n,t),e.then(r)})}function Je(e,t,r){const{setReady:n,setFailed:s,exposedApi:_}=Ye(e,t);let o;return o=typeof window<"u"?Se(self.parent):void 0,W(_,o),[n,s,_]}function Ye(e,t){ue();const r=Promise.resolve();let n,s;const _=new Promise((d,i)=>{n=d,s=i}),o=G(e),c=new Proxy(o,{get:(d,i)=>i==="isConnected"?()=>r:i==="isReady"?()=>_:i in d?d[i]:t?.[i]});return{setReady:n,setFailed:s,exposedApi:c}}let j=!1;function ue(){if(j)return;j=!0,f.set("EVENT",{canHandle:r=>r instanceof CustomEvent,serialize:r=>[{detail:r.detail},[]],deserialize:r=>r}),f.set("FUNCTION",{canHandle:r=>typeof r=="function",serialize(r){const{port1:n,port2:s}=new MessageChannel;return W(r,n),[s,[s]]},deserialize(r){return r.start(),U(r)}}),f.set("MESSAGE_PORT",{canHandle:r=>r instanceof MessagePort,serialize(r){return[r,[r]]},deserialize(r){return r}}),f.set("PHPResponse",{canHandle:r=>typeof r=="object"&&r!==null&&"headers"in r&&"bytes"in r&&"errors"in r&&"exitCode"in r&&"httpStatusCode"in r,serialize(r){return[r.toRawData(),[]]},deserialize(r){return y.fromRawData(r)}});const e=f.get("throw"),t=e?.serialize;e.serialize=({value:r})=>{const n=t({value:r});return r.response&&(n[0].value.response=r.response),r.source&&(n[0].value.source=r.source),n},f.set("StreamedPHPResponse",{canHandle:r=>r instanceof R,serialize(r){const n=je(),s=$e(r.exitCode);if(n)return[{__type:"StreamedPHPResponse",headers:r.headersStream,stdout:r.stdout,stderr:r.stderr,exitCodePort:s},[s]];const _=B(r.headersStream),o=B(r.stdout),c=B(r.stderr);return[{__type:"StreamedPHPResponse",headersPort:_,stdoutPort:o,stderrPort:c,exitCodePort:s},[_,o,c,s]]},deserialize(r){if(r.headers&&r.stdout&&r.stderr){const c=$(r.exitCodePort);return new R(r.headers,r.stdout,r.stderr,c)}const n=v(r.headersPort),s=v(r.stdoutPort),_=v(r.stderrPort),o=$(r.exitCodePort);return new R(n,s,_,o)}})}function je(){try{if(typeof ReadableStream>"u")return!1;const{port1:e}=new MessageChannel,t=new ReadableStream;e.postMessage(t);try{e.close()}catch{}return!0}catch{return!1}}function B(e){const{port1:t,port2:r}=new MessageChannel;return(async()=>{const n=e.getReader();try{for(;;){const{done:s,value:_}=await n.read();if(s){try{t.postMessage({t:"close"})}catch{}try{t.close()}catch{}break}if(_){const o=_.byteOffset===0&&_.byteLength===_.buffer.byteLength?_:_.slice(),c=o.buffer;try{t.postMessage({t:"chunk",b:c},[c])}catch{t.postMessage({t:"chunk",b:o.buffer.slice(0)})}}}}catch(s){try{t.postMessage({t:"error",m:s?.message||String(s)})}catch{}}finally{try{t.close()}catch{}}})(),r}function v(e){return new ReadableStream({start(t){const r=s=>{const _=s.data;if(_)switch(_.t){case"chunk":t.enqueue(new Uint8Array(_.b));break;case"close":t.close(),n();break;case"error":t.error(new Error(_.m||"Stream error")),n();break}},n=()=>{try{e.removeEventListener?.("message",r)}catch{}try{e.onmessage=null}catch{}try{e.close()}catch{}};e.addEventListener?e.addEventListener("message",r):e.on?e.on("message",s=>r({data:s})):e.onmessage=r,typeof e.start=="function"&&e.start()},cancel(){try{e.close()}catch{}}})}function $e(e){const{port1:t,port2:r}=new MessageChannel;return e.then(n=>{try{t.postMessage({t:"resolve",v:n})}catch{}}).catch(n=>{try{t.postMessage({t:"reject",m:n?.message||String(n)})}catch{}}).finally(()=>{try{t.close()}catch{}}),r}function $(e){return new Promise((t,r)=>{const n=_=>{const o=_.data;o&&(o.t==="resolve"?(s(),t(o.v)):o.t==="reject"&&(s(),r(new Error(o.m||""))))},s=()=>{try{e.removeEventListener?.("message",n)}catch{}try{e.onmessage=null}catch{}try{e.close()}catch{}};e.addEventListener?e.addEventListener("message",n):e.on?e.on("message",_=>n({data:_})):e.onmessage=n,typeof e.start=="function"&&e.start()})}const Ze=f.get("throw"),Xe={canHandle:Ze.canHandle,serialize:({value:e})=>{let t;return e instanceof Error?(t={isError:!0,value:Fe(e)},t.value.originalErrorClassName=e.constructor.name):t={isError:!1,value:e},[t,[]]},deserialize:e=>{if(e.isError){const t=Ge(e.value),r=new Error("Comlink method call failed");let n=t;for(;n.cause;)n=n.cause;throw n.cause=r,t}throw e.value}};f.set("throw",Xe);function G(e){return new Proxy(e,{get(t,r){switch(typeof t[r]){case"function":return(...n)=>t[r](...n);case"object":return t[r]===null?t[r]:G(t[r]);case"undefined":case"number":case"string":return t[r];default:return ce(t[r])}}})}function T(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[r,t]))}const Qe={server_name:0,max_fragment_length:1,client_certificate_url:2,trusted_ca_keys:3,truncated_hmac:4,status_request:5,user_mapping:6,client_authz:7,server_authz:8,cert_type:9,supported_groups:10,ec_point_formats:11,srp:12,signature_algorithms:13,use_srtp:14,heartbeat:15,application_layer_protocol_negotiation:16,status_request_v2:17,signed_certificate_timestamp:18,client_certificate_type:19,server_certificate_type:20,padding:21,encrypt_then_mac:22,extended_master_secret:23,token_binding:24,cached_info:25,tls_its:26,compress_certificate:27,record_size_limit:28,pwd_protect:29,pwo_clear:30,password_salt:31,ticket_pinning:32,tls_cert_with_extern_psk:33,delegated_credential:34,session_ticket:35,TLMSP:36,TLMSP_proxying:37,TLMSP_delegate:38,supported_ekt_ciphers:39,pre_shared_key:41,early_data:42,supported_versions:43,cookie:44,psk_key_exchange_modes:45,reserved:46,certificate_authorities:47,oid_filters:48,post_handshake_auth:49,signature_algorithms_cert:50,key_share:51,transparency_info:52,connection_id:54};T(Qe);const et={host_name:0};T(et);const tt={TLS1_CK_PSK_WITH_RC4_128_SHA:138,TLS1_CK_PSK_WITH_3DES_EDE_CBC_SHA:139,TLS1_CK_PSK_WITH_AES_128_CBC_SHA:140,TLS1_CK_PSK_WITH_AES_256_CBC_SHA:141,TLS1_CK_DHE_PSK_WITH_RC4_128_SHA:142,TLS1_CK_DHE_PSK_WITH_3DES_EDE_CBC_SHA:143,TLS1_CK_DHE_PSK_WITH_AES_128_CBC_SHA:144,TLS1_CK_DHE_PSK_WITH_AES_256_CBC_SHA:145,TLS1_CK_RSA_PSK_WITH_RC4_128_SHA:146,TLS1_CK_RSA_PSK_WITH_3DES_EDE_CBC_SHA:147,TLS1_CK_RSA_PSK_WITH_AES_128_CBC_SHA:148,TLS1_CK_RSA_PSK_WITH_AES_256_CBC_SHA:149,TLS1_CK_PSK_WITH_AES_128_GCM_SHA256:168,TLS1_CK_PSK_WITH_AES_256_GCM_SHA384:169,TLS1_CK_DHE_PSK_WITH_AES_128_GCM_SHA256:170,TLS1_CK_DHE_PSK_WITH_AES_256_GCM_SHA384:171,TLS1_CK_RSA_PSK_WITH_AES_128_GCM_SHA256:172,TLS1_CK_RSA_PSK_WITH_AES_256_GCM_SHA384:173,TLS1_CK_PSK_WITH_AES_128_CBC_SHA256:174,TLS1_CK_PSK_WITH_AES_256_CBC_SHA384:175,TLS1_CK_PSK_WITH_NULL_SHA256:176,TLS1_CK_PSK_WITH_NULL_SHA384:177,TLS1_CK_DHE_PSK_WITH_AES_128_CBC_SHA256:178,TLS1_CK_DHE_PSK_WITH_AES_256_CBC_SHA384:179,TLS1_CK_DHE_PSK_WITH_NULL_SHA256:180,TLS1_CK_DHE_PSK_WITH_NULL_SHA384:181,TLS1_CK_RSA_PSK_WITH_AES_128_CBC_SHA256:182,TLS1_CK_RSA_PSK_WITH_AES_256_CBC_SHA384:183,TLS1_CK_RSA_PSK_WITH_NULL_SHA256:184,TLS1_CK_RSA_PSK_WITH_NULL_SHA384:185,TLS1_CK_PSK_WITH_NULL_SHA:44,TLS1_CK_DHE_PSK_WITH_NULL_SHA:45,TLS1_CK_RSA_PSK_WITH_NULL_SHA:46,TLS1_CK_RSA_WITH_AES_128_SHA:47,TLS1_CK_DH_DSS_WITH_AES_128_SHA:48,TLS1_CK_DH_RSA_WITH_AES_128_SHA:49,TLS1_CK_DHE_DSS_WITH_AES_128_SHA:50,TLS1_CK_DHE_RSA_WITH_AES_128_SHA:51,TLS1_CK_ADH_WITH_AES_128_SHA:52,TLS1_CK_RSA_WITH_AES_256_SHA:53,TLS1_CK_DH_DSS_WITH_AES_256_SHA:54,TLS1_CK_DH_RSA_WITH_AES_256_SHA:55,TLS1_CK_DHE_DSS_WITH_AES_256_SHA:56,TLS1_CK_DHE_RSA_WITH_AES_256_SHA:57,TLS1_CK_ADH_WITH_AES_256_SHA:58,TLS1_CK_RSA_WITH_NULL_SHA256:59,TLS1_CK_RSA_WITH_AES_128_SHA256:60,TLS1_CK_RSA_WITH_AES_256_SHA256:61,TLS1_CK_DH_DSS_WITH_AES_128_SHA256:62,TLS1_CK_DH_RSA_WITH_AES_128_SHA256:63,TLS1_CK_DHE_DSS_WITH_AES_128_SHA256:64,TLS1_CK_RSA_WITH_CAMELLIA_128_CBC_SHA:65,TLS1_CK_DH_DSS_WITH_CAMELLIA_128_CBC_SHA:66,TLS1_CK_DH_RSA_WITH_CAMELLIA_128_CBC_SHA:67,TLS1_CK_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA:68,TLS1_CK_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA:69,TLS1_CK_ADH_WITH_CAMELLIA_128_CBC_SHA:70,TLS1_CK_DHE_RSA_WITH_AES_128_SHA256:103,TLS1_CK_DH_DSS_WITH_AES_256_SHA256:104,TLS1_CK_DH_RSA_WITH_AES_256_SHA256:105,TLS1_CK_DHE_DSS_WITH_AES_256_SHA256:106,TLS1_CK_DHE_RSA_WITH_AES_256_SHA256:107,TLS1_CK_ADH_WITH_AES_128_SHA256:108,TLS1_CK_ADH_WITH_AES_256_SHA256:109,TLS1_CK_RSA_WITH_CAMELLIA_256_CBC_SHA:132,TLS1_CK_DH_DSS_WITH_CAMELLIA_256_CBC_SHA:133,TLS1_CK_DH_RSA_WITH_CAMELLIA_256_CBC_SHA:134,TLS1_CK_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA:135,TLS1_CK_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA:136,TLS1_CK_ADH_WITH_CAMELLIA_256_CBC_SHA:137,TLS1_CK_RSA_WITH_SEED_SHA:150,TLS1_CK_DH_DSS_WITH_SEED_SHA:151,TLS1_CK_DH_RSA_WITH_SEED_SHA:152,TLS1_CK_DHE_DSS_WITH_SEED_SHA:153,TLS1_CK_DHE_RSA_WITH_SEED_SHA:154,TLS1_CK_ADH_WITH_SEED_SHA:155,TLS1_CK_RSA_WITH_AES_128_GCM_SHA256:156,TLS1_CK_RSA_WITH_AES_256_GCM_SHA384:157,TLS1_CK_DHE_RSA_WITH_AES_128_GCM_SHA256:158,TLS1_CK_DHE_RSA_WITH_AES_256_GCM_SHA384:159,TLS1_CK_DH_RSA_WITH_AES_128_GCM_SHA256:160,TLS1_CK_DH_RSA_WITH_AES_256_GCM_SHA384:161,TLS1_CK_DHE_DSS_WITH_AES_128_GCM_SHA256:162,TLS1_CK_DHE_DSS_WITH_AES_256_GCM_SHA384:163,TLS1_CK_DH_DSS_WITH_AES_128_GCM_SHA256:164,TLS1_CK_DH_DSS_WITH_AES_256_GCM_SHA384:165,TLS1_CK_ADH_WITH_AES_128_GCM_SHA256:166,TLS1_CK_ADH_WITH_AES_256_GCM_SHA384:167,TLS1_CK_RSA_WITH_AES_128_CCM:49308,TLS1_CK_RSA_WITH_AES_256_CCM:49309,TLS1_CK_DHE_RSA_WITH_AES_128_CCM:49310,TLS1_CK_DHE_RSA_WITH_AES_256_CCM:49311,TLS1_CK_RSA_WITH_AES_128_CCM_8:49312,TLS1_CK_RSA_WITH_AES_256_CCM_8:49313,TLS1_CK_DHE_RSA_WITH_AES_128_CCM_8:49314,TLS1_CK_DHE_RSA_WITH_AES_256_CCM_8:49315,TLS1_CK_PSK_WITH_AES_128_CCM:49316,TLS1_CK_PSK_WITH_AES_256_CCM:49317,TLS1_CK_DHE_PSK_WITH_AES_128_CCM:49318,TLS1_CK_DHE_PSK_WITH_AES_256_CCM:49319,TLS1_CK_PSK_WITH_AES_128_CCM_8:49320,TLS1_CK_PSK_WITH_AES_256_CCM_8:49321,TLS1_CK_DHE_PSK_WITH_AES_128_CCM_8:49322,TLS1_CK_DHE_PSK_WITH_AES_256_CCM_8:49323,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CCM:49324,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CCM:49325,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CCM_8:49326,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CCM_8:49327,TLS1_CK_RSA_WITH_CAMELLIA_128_CBC_SHA256:186,TLS1_CK_DH_DSS_WITH_CAMELLIA_128_CBC_SHA256:187,TLS1_CK_DH_RSA_WITH_CAMELLIA_128_CBC_SHA256:188,TLS1_CK_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA256:189,TLS1_CK_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA256:190,TLS1_CK_ADH_WITH_CAMELLIA_128_CBC_SHA256:191,TLS1_CK_RSA_WITH_CAMELLIA_256_CBC_SHA256:192,TLS1_CK_DH_DSS_WITH_CAMELLIA_256_CBC_SHA256:193,TLS1_CK_DH_RSA_WITH_CAMELLIA_256_CBC_SHA256:194,TLS1_CK_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA256:195,TLS1_CK_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA256:196,TLS1_CK_ADH_WITH_CAMELLIA_256_CBC_SHA256:197,TLS1_CK_ECDH_ECDSA_WITH_NULL_SHA:49153,TLS1_CK_ECDH_ECDSA_WITH_RC4_128_SHA:49154,TLS1_CK_ECDH_ECDSA_WITH_DES_192_CBC3_SHA:49155,TLS1_CK_ECDH_ECDSA_WITH_AES_128_CBC_SHA:49156,TLS1_CK_ECDH_ECDSA_WITH_AES_256_CBC_SHA:49157,TLS1_CK_ECDHE_ECDSA_WITH_NULL_SHA:49158,TLS1_CK_ECDHE_ECDSA_WITH_RC4_128_SHA:49159,TLS1_CK_ECDHE_ECDSA_WITH_DES_192_CBC3_SHA:49160,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CBC_SHA:49161,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CBC_SHA:49162,TLS1_CK_ECDH_RSA_WITH_NULL_SHA:49163,TLS1_CK_ECDH_RSA_WITH_RC4_128_SHA:49164,TLS1_CK_ECDH_RSA_WITH_DES_192_CBC3_SHA:49165,TLS1_CK_ECDH_RSA_WITH_AES_128_CBC_SHA:49166,TLS1_CK_ECDH_RSA_WITH_AES_256_CBC_SHA:49167,TLS1_CK_ECDHE_RSA_WITH_NULL_SHA:49168,TLS1_CK_ECDHE_RSA_WITH_RC4_128_SHA:49169,TLS1_CK_ECDHE_RSA_WITH_DES_192_CBC3_SHA:49170,TLS1_CK_ECDHE_RSA_WITH_AES_128_CBC_SHA:49171,TLS1_CK_ECDHE_RSA_WITH_AES_256_CBC_SHA:49172,TLS1_CK_ECDH_anon_WITH_NULL_SHA:49173,TLS1_CK_ECDH_anon_WITH_RC4_128_SHA:49174,TLS1_CK_ECDH_anon_WITH_DES_192_CBC3_SHA:49175,TLS1_CK_ECDH_anon_WITH_AES_128_CBC_SHA:49176,TLS1_CK_ECDH_anon_WITH_AES_256_CBC_SHA:49177,TLS1_CK_SRP_SHA_WITH_3DES_EDE_CBC_SHA:49178,TLS1_CK_SRP_SHA_RSA_WITH_3DES_EDE_CBC_SHA:49179,TLS1_CK_SRP_SHA_DSS_WITH_3DES_EDE_CBC_SHA:49180,TLS1_CK_SRP_SHA_WITH_AES_128_CBC_SHA:49181,TLS1_CK_SRP_SHA_RSA_WITH_AES_128_CBC_SHA:49182,TLS1_CK_SRP_SHA_DSS_WITH_AES_128_CBC_SHA:49183,TLS1_CK_SRP_SHA_WITH_AES_256_CBC_SHA:49184,TLS1_CK_SRP_SHA_RSA_WITH_AES_256_CBC_SHA:49185,TLS1_CK_SRP_SHA_DSS_WITH_AES_256_CBC_SHA:49186,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_SHA256:49187,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_SHA384:49188,TLS1_CK_ECDH_ECDSA_WITH_AES_128_SHA256:49189,TLS1_CK_ECDH_ECDSA_WITH_AES_256_SHA384:49190,TLS1_CK_ECDHE_RSA_WITH_AES_128_SHA256:49191,TLS1_CK_ECDHE_RSA_WITH_AES_256_SHA384:49192,TLS1_CK_ECDH_RSA_WITH_AES_128_SHA256:49193,TLS1_CK_ECDH_RSA_WITH_AES_256_SHA384:49194,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256:49195,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384:49196,TLS1_CK_ECDH_ECDSA_WITH_AES_128_GCM_SHA256:49197,TLS1_CK_ECDH_ECDSA_WITH_AES_256_GCM_SHA384:49198,TLS1_CK_ECDHE_RSA_WITH_AES_128_GCM_SHA256:49199,TLS1_CK_ECDHE_RSA_WITH_AES_256_GCM_SHA384:49200,TLS1_CK_ECDH_RSA_WITH_AES_128_GCM_SHA256:49201,TLS1_CK_ECDH_RSA_WITH_AES_256_GCM_SHA384:49202,TLS1_CK_ECDHE_PSK_WITH_RC4_128_SHA:49203,TLS1_CK_ECDHE_PSK_WITH_3DES_EDE_CBC_SHA:49204,TLS1_CK_ECDHE_PSK_WITH_AES_128_CBC_SHA:49205,TLS1_CK_ECDHE_PSK_WITH_AES_256_CBC_SHA:49206,TLS1_CK_ECDHE_PSK_WITH_AES_128_CBC_SHA256:49207,TLS1_CK_ECDHE_PSK_WITH_AES_256_CBC_SHA384:49208,TLS1_CK_ECDHE_PSK_WITH_NULL_SHA:49209,TLS1_CK_ECDHE_PSK_WITH_NULL_SHA256:49210,TLS1_CK_ECDHE_PSK_WITH_NULL_SHA384:49211,TLS1_CK_ECDHE_ECDSA_WITH_CAMELLIA_128_CBC_SHA256:49266,TLS1_CK_ECDHE_ECDSA_WITH_CAMELLIA_256_CBC_SHA384:49267,TLS1_CK_ECDH_ECDSA_WITH_CAMELLIA_128_CBC_SHA256:49268,TLS1_CK_ECDH_ECDSA_WITH_CAMELLIA_256_CBC_SHA384:49269,TLS1_CK_ECDHE_RSA_WITH_CAMELLIA_128_CBC_SHA256:49270,TLS1_CK_ECDHE_RSA_WITH_CAMELLIA_256_CBC_SHA384:49271,TLS1_CK_ECDH_RSA_WITH_CAMELLIA_128_CBC_SHA256:49272,TLS1_CK_ECDH_RSA_WITH_CAMELLIA_256_CBC_SHA384:49273,TLS1_CK_PSK_WITH_CAMELLIA_128_CBC_SHA256:49300,TLS1_CK_PSK_WITH_CAMELLIA_256_CBC_SHA384:49301,TLS1_CK_DHE_PSK_WITH_CAMELLIA_128_CBC_SHA256:49302,TLS1_CK_DHE_PSK_WITH_CAMELLIA_256_CBC_SHA384:49303,TLS1_CK_RSA_PSK_WITH_CAMELLIA_128_CBC_SHA256:49304,TLS1_CK_RSA_PSK_WITH_CAMELLIA_256_CBC_SHA384:49305,TLS1_CK_ECDHE_PSK_WITH_CAMELLIA_128_CBC_SHA256:49306,TLS1_CK_ECDHE_PSK_WITH_CAMELLIA_256_CBC_SHA384:49307,TLS1_CK_ECDHE_RSA_WITH_CHACHA20_POLY1305:52392,TLS1_CK_ECDHE_ECDSA_WITH_CHACHA20_POLY1305:52393,TLS1_CK_DHE_RSA_WITH_CHACHA20_POLY1305:52394,TLS1_CK_PSK_WITH_CHACHA20_POLY1305:52395,TLS1_CK_ECDHE_PSK_WITH_CHACHA20_POLY1305:52396,TLS1_CK_DHE_PSK_WITH_CHACHA20_POLY1305:52397,TLS1_CK_RSA_PSK_WITH_CHACHA20_POLY1305:52398};T(tt);const rt={secp256r1:23,secp384r1:24,secp521r1:25,x25519:29,x448:30};T(rt);const nt={uncompressed:0,ansiX962_compressed_prime:1,ansiX962_compressed_char2:2};T(nt);const st={anonymous:0,rsa:1,dsa:2,ecdsa:3};T(st);const _t={none:0,md5:1,sha1:2,sha224:3,sha256:4,sha384:5,sha512:6};T(_t);const ot={Warning:1,Fatal:2};T(ot);const at={CloseNotify:0,UnexpectedMessage:10,BadRecordMac:20,DecryptionFailed:21,RecordOverflow:22,DecompressionFailure:30,HandshakeFailure:40,NoCertificate:41,BadCertificate:42,UnsupportedCertificate:43,CertificateRevoked:44,CertificateExpired:45,CertificateUnknown:46,IllegalParameter:47,UnknownCa:48,AccessDenied:49,DecodeError:50,DecryptError:51,ExportRestriction:60,ProtocolVersion:70,InsufficientSecurity:71,InternalError:80,UserCanceled:90,NoRenegotiation:100,UnsupportedExtension:110};T(at);crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey","deriveBits"]);function it(e,t){return{type:"response",requestId:e,response:t}}class vt extends TransformStream{constructor(){let t=new Uint8Array(0),r="SCAN_CHUNK_SIZE",n=0;super({transform(s,_){for(t=Le([t,s]);t.length>0;)if(r==="SCAN_CHUNK_SIZE"){if(t.length<3)return;let o=0;for(;o<t.length;){const i=t[o];if(!(i>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70))break;o++}if(o===0)throw new Error("Invalid chunk size format");if(t.length<o+2)return;if(t[o]!==13||t[o+1]!==10)throw new Error("Invalid chunk size format. Expected CRLF after chunk size");const c=new TextDecoder().decode(t.slice(0,o)),d=parseInt(c,16);if(t=t.slice(o+2),d===0){r="SCAN_FINAL_CHUNK",_.terminate();return}n=d,r="SCAN_CHUNK_DATA"}else if(r==="SCAN_CHUNK_DATA"){const o=Math.min(n,t.length),c=t.slice(0,o);t=t.slice(o),n-=o,_.enqueue(c),n===0&&(r="SCAN_CHUNK_TRAILER")}else if(r==="SCAN_CHUNK_TRAILER"){if(t.length<2)return;if(t[0]!==13||t[1]!==10)throw new Error("Invalid chunk trailer format. Expected CRLF after chunk data");t=t.slice(2),r="SCAN_CHUNK_SIZE"}}})}}function ct(e,t){window.addEventListener("message",r=>{r.source===e.contentWindow&&(t&&r.origin!==t||typeof r.data!="object"||r.data.type!=="relay"||window.parent.postMessage(r.data,"*"))}),window.addEventListener("message",r=>{r.source===window.parent&&(typeof r.data!="object"||r.data.type!=="relay"||e?.contentWindow?.postMessage(r.data))})}async function St(e){const t=new Worker(e,{type:"module"});return new Promise((r,n)=>{t.onerror=_=>{const o=new Error(`WebWorker failed to load at ${e}. ${_.message?`Original error: ${_.message}`:""}`);o.filename=_.filename,n(o)};function s(_){_.data==="worker-script-started"&&(r(t),t.removeEventListener("message",s))}t.addEventListener("message",s)})}new re({concurrency:15});const dt="_overlay_1571u_1",ut="_is-hidden_1571u_17",lt="_wrapper_1571u_22",Ct="_wrapper-definite_1571u_32",Ht="_progress-bar_1571u_32",At="_is-indefinite_1571u_32",Et="_wrapper-indefinite_1571u_33",ft="_is-definite_1571u_33",Tt="_caption_1571u_81",A={overlay:dt,isHidden:ut,wrapper:lt,wrapperDefinite:Ct,progressBar:Ht,isIndefinite:At,wrapperIndefinite:Et,isDefinite:ft,caption:Tt};class ht{constructor(t={}){this.caption="Preparing WordPress",this.progress=0,this.isIndefinite=!1,this.visible=!0,this.element=document.createElement("div"),this.captionElement=document.createElement("h3"),this.element.appendChild(this.captionElement),this.setOptions(t)}setOptions(t){"caption"in t&&t.caption&&(this.caption=t.caption),"progress"in t&&(this.progress=t.progress),"isIndefinite"in t&&(this.isIndefinite=t.isIndefinite),"visible"in t&&(this.visible=t.visible),this.updateElement()}destroy(){this.setOptions({visible:!1}),setTimeout(()=>{this.element.remove()},500)}updateElement(){this.element.className="",this.element.classList.add(A.overlay),this.visible||this.element.classList.add(A.isHidden),this.captionElement.className="",this.captionElement.classList.add(A.caption),this.captionElement.textContent=this.caption+"...";const t=this.element.querySelector(`.${A.wrapper}`);t&&this.element.removeChild(t),this.isIndefinite?this.element.appendChild(this.createProgressIndefinite()):this.element.appendChild(this.createProgress())}createProgress(){const t=document.createElement("div");t.classList.add(A.wrapper,A.wrapperDefinite);const r=document.createElement("div");return r.classList.add(A.progressBar,A.isDefinite),r.style.width=this.progress+"%",t.appendChild(r),t}createProgressIndefinite(){const t=document.createElement("div");t.classList.add(A.wrapper,A.wrapperIndefinite);const r=document.createElement("div");return r.classList.add(A.progressBar,A.isIndefinite),t.appendChild(r),t}}const pt="/sw.js",Lt="/playground-worker-endpoint-blueprints-v1-_BVfnooO.js",yt="/playground-worker-endpoint-blueprints-v2-CavtULvV.js",z=new URL("/",(import.meta||{}).url).origin;function mt(){const r=new URL(document.location.href).searchParams.get("blueprints-runner")==="v2"?yt:Lt;return new URL(r,z)+""}const gt=new URL(pt,z),It=new URL(document.location.href).searchParams;async function wt(){Kt();const e=It.has("progressbar");let t;e&&(t=new ht,document.body.prepend(t.element));const r=navigator.serviceWorker;if(!r)throw window.isSecureContext?new q("Service workers are not supported in your browser."):new q("WordPress Playground uses service workers and may only work on HTTPS and http://localhost/ sites, but the current site is neither.");const n=await r.register(gt+"",{type:"module",updateViaCache:"none"});try{await n.update()}catch(a){ee.error("Failed to update service worker.",a)}const s=new URL(mt(),z)+"",_=Ve(await St(s)),o=document.querySelector("#wp"),c={async onDownloadProgress(a){return _.onDownloadProgress(a)},async journalFSEvents(a,u){return _.journalFSEvents(a,u)},async replayFSJournal(a){return _.replayFSJournal(a)},async addEventListener(a,u){return await _.addEventListener(a,u)},async removeEventListener(a,u){return await _.removeEventListener(a,u)},async setProgress(a){if(!t)throw new Error("Progress bar not available");t.setOptions(a)},async setLoaded(){if(!t)throw new Error("Progress bar not available");t.destroy()},async onNavigation(a){o.addEventListener("load",async l=>{try{const C=l.currentTarget.contentWindow;await new Promise(P=>setTimeout(P,0));const b=await S.internalUrlToPath(C.location.href);a(b)}catch{}});let u;setInterval(async()=>{try{let l="";o.contentWindow?l=o.contentWindow.location.href:l=o.src;const C=await S.internalUrlToPath(l);C!==u&&(u=C,a(C))}catch{}},500)},async goTo(a){a.startsWith("/")||(a="/"+a),a==="/wp-admin"&&(a="/wp-admin/");const u=await S.pathToInternalUrl(a),l=o.src;if(u===l&&o.contentWindow)try{o.contentWindow.location.href=u;return}catch{}o.src=u},async getCurrentURL(){let a="";try{a=o.contentWindow.location.href}catch{}return a||(a=o.src),await S.internalUrlToPath(a)},async setIframeSandboxFlags(a){o.setAttribute("sandbox",a.join(" "))},async onMessage(a){return await _.onMessage(a)},async mountOpfs(a,u){return await _.mountOpfs(a,u)},async unmountOpfs(a){return await _.unmountOpfs(a)},async backfillStaticFilesRemovedFromMinifiedBuild(){await _.backfillStaticFilesRemovedFromMinifiedBuild()},async hasCachedStaticFilesRemovedFromMinifiedBuild(){return await _.hasCachedStaticFilesRemovedFromMinifiedBuild()},async boot(a){await _.boot(a),navigator.serviceWorker.addEventListener("message",async function(l){if(a.scope&&l.data.scope!==a.scope)return;const C=l.data.args||[],b=l.data.method,P=await _[b](...C);l.source.postMessage(it(l.data.requestId,P))}),r.startMessages();try{await _.isReady(),ct(o,Dt(await S.absoluteUrl)),d()}catch(u){throw i(u),u}await c.hasCachedStaticFilesRemovedFromMinifiedBuild()?await c.backfillStaticFilesRemovedFromMinifiedBuild():o.addEventListener("load",()=>{c.backfillStaticFilesRemovedFromMinifiedBuild()})}};await _.isConnected();const[d,i,S]=Je(c,_);return S}function Dt(e){return new URL(e,"https://example.com").origin}function Kt(){let e=!1;try{e=window.parent!==window&&window.parent.IS_WASM_WORDPRESS}catch{}if(e)throw new Error(`The service worker did not load correctly. This is a bug,
			please report it on https://github.com/WordPress/wordpress-playground/issues`);window.IS_WASM_WORDPRESS=!0}const Wt="trunk",bt="6.9-RC4",Pt={trunk:Wt,beta:bt,"6.8":"6.8.3","6.7":"6.7.4","6.6":"6.6.4","6.5":"6.5.7","6.4":"6.4.5","6.3":"6.3.5"},Rt=Object.keys(Pt);Rt.filter(e=>e.match(/^\d/))[0];window.top!=window.self&&document.body.classList.add("is-embedded");try{window.playground=await wt()}catch(e){console.error(e),document.body.className="has-error",document.body.innerHTML="",e?.name==="NotSupportedError"?document.body.append(await Bt()):document.body.append(Mt(e))}finally{document.body.classList.remove("is-loading")}function Mt(e){const t=document.createDocumentFragment(),r=document.createElement("div");r.className="error-message";const n=e.userFriendlyMessage||"See the developer tools for error details.";r.innerHTML="Ooops! WordPress Playground had a hiccup! <br/><br/> "+n,t.append(r);const s=document.createElement("button");s.innerText="Try again",s.onclick=()=>{window.location.reload()},t.append(s);const _=document.createElement("p");return _.innerHTML=`
					If the problem persists, please
					<a href="https://github.com/WordPress/playground-tools/issues/new"
						target="_blank"
						>report an issue on GitHub</a>.
				`,t.append(_),t}async function Bt(){const e=document.createDocumentFragment();let t=!1;try{const{state:r}=await navigator.permissions.query({name:"storage-access"});t=r==="granted"}catch{}if(t||!("requestStorageAccess"in document)){const r=document.createElement("div");r.innerText="It looks like you have disabled third-party cookies in your browser. This also disables the Service Worker API used by WordPress Playground. Please re-enable third-party cookies and try again.",e.append(r);const n=document.createElement("button");n.innerText="Try again",n.onclick=()=>{window.location.reload()},e.append(n)}else{const r=document.createElement("div");r.innerText="WordPress Playground needs to use storage in your browser.",e.append(r);const n=document.createElement("button");n.innerText="Allow storage access",e.append(n),n.onclick=async()=>{try{await document.requestStorageAccess(),window.location.reload()}catch{r.innerHTML=`
								<p>
									Oops! Playground failed to start. Here's what to do:
								</p>

								<h3>Did you disable third-party cookies?</h3>
								<p>
									It also disables the required Service Worker API. Please re-enable
									third-party cookies and try again.
								</p>

								<h3>Did you refuse to grant Playground storage access?</h3>
								<p>
									Click the button below and grant storage access. Note the button may
									not work if you have disabled third-party cookies in your browser.
								</p>
								<p>
									If neither method helped, please
									<a href="https://github.com/WordPress/playground-tools/issues/new"
										target="_blank">
										report an issue on GitHub
									</a>.
								</p>
								`}}}return e}
//# sourceMappingURL=wordpress-DKtDWb4I.js.map
